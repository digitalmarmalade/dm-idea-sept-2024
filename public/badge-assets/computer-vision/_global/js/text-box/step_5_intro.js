text_content = [
  {
    id: 1,
    text: `<p
        class="
        animate__animated
        animate__fadeIn
        animate__slow
        "
        >
            You now know what a convolutional neural network is!
        </p>
        `,
  },
  {
    id: 2,
    text: `
        <p class="aanimate__animated animate__fadeIn animate__slow">
            But how do we train the CNN to be able to perform tasks that we want it to do, such as classify images?
        </p>
        `,
  },
  {
    id: 3,
    text: `
        <p class="animate__animated animate__fadeIn animate__slow">
            To solve the final puzzle piece in our mystery, we need to train our CNN to be able to identify the clue found at the crime scene in the CCTV footage that we will run through it.
        </p>`,
  },
  {
    id: 4,
    text: `
        <p class="animate__animated animate__fadeIn animate__slow">
            The following activity is a simulation exercise designed to help you gain a basic understanding of CNNs. In real-life applications, CNNs are likely to have more layers and be more complicated. The CNN training process has been simplified so you can try training one yourself in this badge!
        </p>`,
  },
  {
    id: 5,
    text: `
        <p class="animate__animated animate__fadeIn animate__slow">
            <strong>Let’s train the CNN!</strong>
        </p>
        <p
        class="
        animate__animated
        animate__fadeIn
        animate__slow
        "
        >
            Find the most appropriate label from the word menu and type them in the yellow box below each image.
        </p>
        `,
  },
  {
    id: 6,
    text: `
        <p class="animate__animated animate__fadeIn animate__slow">
            First, we need to provide the machine with training data that is labelled accurately. This is the ‘correct’ data.


            <strong> Please drag and drop the training data into the computer</strong>. </p>

        `,
  },
  {
    id: 7,
    text: `
        <p class="animate__animated animate__fadeIn animate__slow">Next, we need to provide the input data for the CNN to process. <strong>
        Feed the clue that you uncovered earlier into the machine.</strong></p>`,
  },
  {
    id: 8,
    text: `
        <p class="animate__animated animate__fadeIn animate__slow">
            The CNN trains itself, using the process we have learned about earlier, to recognise patterns in the training data provided.
        </p>`,
  },
  {
    id: 9,
    text: `
        <p class="animate__animated animate__fadeIn animate__slow">
            These features are used to compare the training data with the input data. The CNN then makes a prediction and assigns a probability that the input image may be identified as a specific object.
        </p>`,
  },
  {
    id: 10,
    text: `
        <p class="animate__animated animate__fadeIn animate__slow">
            However, this prediction may be wrong. How does the CNN figure this out?
        </p>`,
  },
  {
    id: 11,
    text: `
        <p class="animate__animated animate__fadeIn animate__slow">
            During this training process, along with the input, the CNN also has the output fed to it.
        </p>`,
  },
  {
    id: 12,
    text: `
        <p class="animate__animated animate__fadeIn animate__slow">
        The predicted output is compared against the actual output to realise the error in prediction.
        The <span class="tooltipster jsTooltip tooltipstered" data-tooltip-content="#tooltip1_content">magnitude</span> of the error indicates how wrong the CNN
        was and an indication is also given for whether the predicted values were higher or lower than expected.
        </p>`,
  },
  {
    id: 13,
    text: `
        <p class="animate__animated animate__fadeIn animate__slow">
            The direction and magnitude of the error is transferred back through the network for the weights to be adjusted.
        </p>`,
  },
  {
    id: 14,
    text: `
        <p class="animate__animated animate__fadeIn animate__slow">
            Drag and drop the magnitude of error back into the model.
        </p>`,
  },
  // {
  //     id: 15,
  //     text: `
  //     <p class="animate__animated animate__fadeIn animate__slow">
  //         Hit <strong>Pause Training</strong> when you think that the model has hit a good point in training.
  //     </p>`,
  // },
  {
    id: 15,
    text: `
        <p class="animate__animated animate__fadeIn animate__slow">
        This process is repeated to minimise the error between the actual output and predicted output,
        and continues until the weights are assigned such that the network can predict the input image correctly in most of the cases.
        </p>`,
  },
  {
    id: 16,
    text: `
        <p class="animate__animated animate__fadeIn animate__slow">
            Observe the two tables on your screen and watch as the network repeats this process. Based on what you have just learned, click on
            the <strong>PAUSE TRAINING</strong> button when you think the network has reached a point in training where it can make a prediction with a high level of accuracy.
        </p>`,
  },
  {
    id: 17,
    text: `
        <p class="animate__animated animate__fadeIn animate__slow">
            Watch how the numbers change and study them carefully before you hit pause.
        </p>`,
  },
  // end story
  {
    id: 18,
    text: `
        <p class="animate__animated animate__fadeIn animate__slow">
            Video footage from a CCTV camera set up on the main road outside the Intelligence Agency has been run through the CNN that you have just trained to be processed.
        </p>`,
  },
  {
    id: 19,
    text: `
        <p class="animate__animated animate__fadeIn animate__slow">
            The CNN was able to detect the motocross helmet from the crime scene in this video footage – not just once but multiple times!
        </p>`,
  },
  {
    id: 20,
    text: `
        <p class="animate__animated animate__fadeIn animate__slow">
            Can you spot the motorcyclist wearing the motocross helmet?
        </p>`,
  },
  {
    id: 21,
    text: `
        <p class="animate__animated animate__fadeIn animate__slow">
            CCTV footage from the past week was processed using the CNN and it was found
            that the suspect wearing the same motocross helmet rode past the intelligence
            agency a total of six times during that time period.
        </p>`,
  },
  {
    id: 22,
    text: `
        <p class="animate__animated animate__fadeIn animate__slow">
            The Security Service was able to see the license plate on the motorcycle and confirmed that it was the same motorcycle each time.
            They have run this license plate through their internal database and it does not belong to an employee of the Intelligence Agency.
        </p>`,
  },
  {
    id: 23,
    text: `
        <p class="animate__animated animate__fadeIn animate__slow">
            The Security Service find it suspicious that this same motorcycle would pass by the Intelligence Agency so many times within a short time period with no known reason. There is a chance that this suspect was scoping out the building prior to committing the crime – this must be investigated!
        </p>`,
  },
  {
    id: 24,
    text: `
        <p class="animate__animated animate__fadeIn animate__slow">
            After thorough investigations by The Security Service, it has been found that the license plate belongs to Agent 001 and confirm he is the one identified on the motorcycle. By catching Agent 001, we were able to stop the release of classified information that could have led to an even bigger crime.
        </p>`,
  },
  {
    id: 25,
    text: `
        <p class="animate__animated animate__fadeIn animate__slow">
            <strong>Great Job!</strong> You have used your computer vision knowledge and skills to help The Secret Service solve a mystery by manipulating
            images and running CCTV footage through your trained CNN model.
        </p>`,
  },
  {
    id: 26,
    text: `
        <p class="animate__animated animate__fadeIn animate__slow">
        <strong>Final Note:</strong> In this simulation activity and storyline, AI aided in the search for our suspect but the mystery was solved based on our findings using AI as well as circumstantial evidence found by The Secret Service. It is important to highlight that in real-life scenarios, we cannot always solely depend on findings from an AI system, especially in high-risk situations.
        </p>
        <p class="animate__animated animate__fadeIn animate__slow">
        While AI is a superpower that can give us great insight and help with our tasks, like all technology, there are potential ethical pitfalls that need to be considered. To learn more about the ethics of AI, check out the “What is AI?” Bronze badge!
        </p>`,
  },
];

var id = 0;
updateText();

function updateText() {
  $(".speech-bubble__holder .speech-bubble").contents(":not(.Js-not-remove)").remove();

  $(".speech-bubble__holder .speech-bubble .flex--justify-end.Js-not-remove").before(`${text_content[id].text}`);
}

function trainTheCNN() {
  console.log("train the cnn");
  $(".speech-bubble__holder .speech-bubble").contents(":not(.Js-not-remove)").remove();

  $(".step-5-intro-text-next").parent().hide();
  $(".speech-bubble__holder .speech-bubble .flex--justify-end.Js-not-remove").before(`${text_content[id].text}`);

  // $("#task9Anchor").slideDown();
  $(".task-9").removeClass("disabled"); // caludio remove the class for opacity you added
  // $("html, body").animate({ scrollTop: $(document).height() });
}

function trainingImages() {
  console.log("drop the training images");

  $(".speech-bubble__holder .speech-bubble").contents(":not(.Js-not-remove)").remove();

  $(".step-5-intro-text-next").parent().fadeOut();
  $(".speech-bubble__holder .speech-bubble .flex--justify-end.Js-not-remove").before(`${text_content[id].text}`);

  $("#task10Anchor").slideDown();
  // $("html, body").animate({ scrollTop: $(document).height() });
}

function inputImage() {
  console.log("drop the input image");

  $(".speech-bubble__holder .speech-bubble").contents(":not(.Js-not-remove)").remove();

  $(".step-5-intro-text-next").parent().fadeOut();
  $(".speech-bubble__holder .speech-bubble .flex--justify-end.Js-not-remove").before(`${text_content[id].text}`);

  $("html, body").animate({ scrollTop: 0 });
  $("#computer").addClass("image--dropped");

  $("#input-data").fadeIn();
}

function CNNTrainItself() {
  console.log("CNN train itself");

  $("#task10Anchor").fadeOut();

  $("html, body").animate({ scrollTop: 0 });

  $(".speech-bubble__holder .speech-bubble").contents(":not(.Js-not-remove)").remove();

  $(".step-5-intro-text-next").parent().fadeIn();
  $(".speech-bubble__holder .speech-bubble .flex--justify-end.Js-not-remove").before(`${text_content[id].text}`);

  $("#image-processing").slideDown();
}
function firstOutput() {
  console.log("First Output");

  // $("#task10Anchor").fadeOut();

  $(".speech-bubble__holder .speech-bubble").contents(":not(.Js-not-remove)").remove();

  $(".step-5-intro-text-next").parent().fadeIn();
  $(".speech-bubble__holder .speech-bubble .flex--justify-end.Js-not-remove").before(`${text_content[id].text}`);

  $(".icon--processing").hide();

  $("#car-initial").text("70%");
  $("#motocross-initial").text("10%");
  $("#motorcycle-initial").text("20%");

  // $("#task-13").slideDown();
}
function toolTip() {
  console.log("toool tip callled");
  $(".speech-bubble__holder .speech-bubble").contents(":not(.Js-not-remove)").remove();

  $(".speech-bubble__holder .speech-bubble .flex--justify-end.Js-not-remove").before(`${text_content[id].text}`);
  $(".jsTooltip").tooltipster({
    trigger: "click",
  });
}
function dropErrorMagnitude() {
  console.log("Drag and drop Error Magnitude");

  // $("#task10Anchor").fadeOut();

  $("#image-processing").hide();
  $("#task-11-activity").slideDown();

  $(".speech-bubble__holder .speech-bubble").contents(":not(.Js-not-remove)").remove();

  $(".step-5-intro-text-next").parent().hide();
  $(".speech-bubble__holder .speech-bubble .flex--justify-end.Js-not-remove").before(`${text_content[id].text}`);

  $("#ErrorMargin").slideDown();

  // $("#task-13").slideDown();
}

function CNNTrainingActivityDisplay() {
  console.log("Train the CNN");

  $("#task-11-activity").hide(); // why am i doing this?? HASSAN!!

  $(".speech-bubble__holder .speech-bubble").contents(":not(.Js-not-remove)").remove();

  $(".step-5-intro-text-next").parent().fadeIn();
  $(".speech-bubble__holder .speech-bubble .flex--justify-end.Js-not-remove").before(`${text_content[id].text}`);

  $("#task-12").slideDown();

  $(".Js_training-pause").attr("disabled", true);
}
function CNNTraining() {
  console.log("Train the CNN");

  $("#task-11-activity").hide(); // why am i doing this?? HASSAN!!

  $(".speech-bubble__holder .speech-bubble").contents(":not(.Js-not-remove)").remove();

  $(".step-5-intro-text-next").parent().hide();
  $(".speech-bubble__holder .speech-bubble .flex--justify-end.Js-not-remove").before(`${text_content[id].text}`);

  // $("#task-12").slideDown();
  // $(".Js_training-pause").slideDown();
  $(".Js_training-pause").attr("disabled", false);
}

function beginEndStory() {
  console.log("begin end story");

  $(".jsSortableSuccess").hide();
  $(".group-2").hide();
  $("#case-resolved").slideDown();

  $(".speech-bubble__holder .speech-bubble").contents(":not(.Js-not-remove)").remove();

  $(".step-5-intro-text-next").parent().fadeIn();
  $(".speech-bubble__holder .speech-bubble .flex--justify-end.Js-not-remove").before(`${text_content[id].text}`);

  // $("#task-12").slideDown();
}
function revealNumberPlate() {
  console.log("Reveal Number Plate");

  $(".illustration--number-plate").addClass("show"); // why am i doing this?? HASSAN!!

  $(".speech-bubble__holder .speech-bubble").contents(":not(.Js-not-remove)").remove();

  // $(".step-5-intro-text-next").parent().fadeOut();
  $(".speech-bubble__holder .speech-bubble .flex--justify-end.Js-not-remove").before(`${text_content[id].text}`);

  // $("#task-12").slideDown();
}

function showSuccessPage() {
  console.log("Show Success page");

  oBadges.stepCompleted();
  window.location.href = "/computer-vision/success";
}

function nextChapter() {
  id += 1;
  console.log(id);
  // if (id < 4) updateText();
  if (id === 4) trainTheCNN();
  else if (id === 5) trainingImages();
  else if (id === 6) inputImage();
  else if (id === 7) CNNTrainItself();
  else if (id === 9) firstOutput();
  else if (id === 11) toolTip();
  else if (id === 13) dropErrorMagnitude();
  else if (id === 14) CNNTrainingActivityDisplay();
  else if (id === 16) CNNTraining();
  else if (id === 17) beginEndStory();
  else if (id === 21) revealNumberPlate();
  else if (id === text_content.length) showSuccessPage();
  else updateText();
}

$(".step-5-intro-text-next").click((e) => {
  console.log("next clicked");
  nextChapter();
});
